<!DOCTYPE html>
<html>
    <head>
        <% include 'head.ect' %>
        <title>DataFed Help</title>
    </head>

<body class='' style='height:100%'>
    <div class="col-flex" style="height:100%;width:100%">
        <div class="ui-widget-header" style="flex:none;padding:.25em .5em">
            <div style="font-size:2em;">DataFed - Help</div>
        </div>

        <div class='row-flex' style="flex:auto;min-height:0px">
            <div class="ui-widget-content content" style="flex:none;overflow:auto;padding:.25em">
                <h2>Contents</h2>
                <a href='#s1'>1. Introduction</a><br>
                &nbsp&nbsp<a href='#s11'>1.1 Interfaces</a><br>
                <a href='#s2'>2. System Overview</a><br>
                &nbsp&nbsp<a href='#s21'>2.1 Identifiers and Aliases</a><br>
                &nbsp&nbsp<a href='#s22'>2.2 Collective Ownership</a><br>
                &nbsp&nbsp<a href='#s23'>2.3 Metadata</a><br>
                &nbsp&nbsp<a href='#s24'>2.4 Collection Hierarchies</a><br>
                &nbsp&nbsp<a href='#s25'>2.5 Access Control</a><br>
                &nbsp&nbsp<a href='#s26'>2.6 Storage Allocations</a><br>
                <a href='#s3'>3. Registration</a><br>
                <a href='#s4'>4. Web Portal UI</a><br>
                &nbsp&nbsp<a href='#s41'>4.1 Data Browser</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s411'>4.1.1 Drag and Drop</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s412'>4.1.2 My Data</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s413'>4.1.3 My Projects</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s414'>4.1.4 Managed Projects</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s415'>4.1.5 Member Projects</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s416'>4.1.6 Shared Data</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s417'>4.1.7 Search Results</a><br>
                &nbsp&nbsp<a href='#s42'>4.2 Selection Information</a><br>
                &nbsp&nbsp<a href='#s43'>4.3 Action Buttons</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s431'>4.3.1 New</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s432'>4.3.2 Edit</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s433'>4.3.3 Copy</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s434'>4.3.4 Delete</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s435'>4.3.5 Share</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s436'>4.3.6 Get</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s437'>4.3.7 Put</a><br>
                &nbsp&nbsp<a href='#s44'>4.4 Search</a><br>
                &nbsp&nbsp<a href='#s45'>4.5 Transfers</a><br>
                &nbsp&nbsp<a href='#s46'>4.6 Settings</a><br>
                &nbsp&nbsp<a href='#s47'>4.6 Header and Footer</a><br>
                <a href='#s5'>5. Command Line Interface (CLI)</a><br>
                &nbsp&nbsp<a href='#s51'>5.1 CLI Introduction</a><br>
                &nbsp&nbsp<a href='#s52'>5.2 CLI Installation</a><br>
                &nbsp&nbsp<a href='#s53'>5.3 CLI Configuration</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s531'>5.3.1 Configuration Settings</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5311'>5.3.1.1 Server Config File</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5312'>5.3.1.2 Server Config Directory</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5313'>5.3.1.3 Server Public Key File</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5314'>5.3.1.4 Server Host</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5315'>5.3.1.5 Server Port</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5316'>5.3.1.6 Client Config File</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5317'>5.3.1.7 Client Config Directory</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5318'>5.3.1.8 Client Public Key File</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s5319'>5.3.1.9 Client Private Key File</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s53110'>5.3.1.10 Default Endpoint</a><br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='#s53111'>5.3.1.11 Default Verbosity</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s532'>5.3.2 Configuration Files</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s533'>5.3.3 Configuration Priority</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s534'>5.3.4 Automatic Authentication</a><br>
                &nbsp&nbsp<a href='#s54'>5.4 CLI Commands</a><br>
                &nbsp&nbsp<a href='#s55'>5.5 Client API</a><br>
            </div>
            <div class='ui-widget-content' style='flex:auto;height:auto;overflow:auto;padding: 0em 2em 0em 2em'>

<h1 id='s1'>1. Introduction</h1>

<p>DataFed is a federated data <i>collaboration</i> and <i>management</i> system for science. DataFed provides many features that ease the <i>data management burden</i> associated with general scientific research; however, the primary goal of DataFed is to <i>improve scientific data quality</i> by enabling precise full-life-cycle control over data artifacts, with the ability to uniformly share and access data across geographically distributed facilities. The combined capabilities of DataFed directly support the concept of <i>"repeatable science"</i> by unambiguously identifying data, capturing context and metadata, and by providing the means to access and utilize data globally.</p>

<p>DataFed can be thought of as a "Tier 2+" distributed data storage system - meaning it is intended for creating and working with data that is of medium- to long-term significance to a geographically distributed audience. Unlike a Tier 1 storage system (i.e. a local file system), DataFed compromises raw access performance in favor of data quality and sustainability. While DataFed shares many features with Tier 3 storage systems (i.e. a data archives), DataFed allows data and metadata to be updated and specifically includes features for disseminating any changes to downstream subscribers. DataFed also provides additional collaboration features to enable precise "in-band" communication regarding data and collections of data.</p>

<p>DataFed utilizes <a href="https://www.globus.org" target="_blank">Globus</a> for efficient and secure data transfers, as well as for user authentication. Globus can be thought of as a "data network" where data transfers take place between Globus "endpoints" - which are Globus services that enable access to underlying file systems hosted by member organizations. DataFed adds a data management layer on top of Globus that permits data to be located and accessed without needing to know where the data is physically stored within the Globus network. Because DataFed relies heavily on Globus, it is recommended that DataFed users familiarize themselves with how Globus works from the documentation <a href="https://www.globus.org/what-we-do" _target="_blank">here</a>.</p>

<h2 id='s11'>1.1 Interfaces</h2>

<p>There are two ways to access DataFed: 1) DataFed Web Portal, and 2) DataFed command-line interface (CLI). This on-line documentation primarily covers DataFed Web Portal; however, DataFed CLI is critical for accessing and managing data from within computational and analytics environments. The CLI was specifically created to ease the data management burden of computational scientists within HPC facilities with complex security environments. DataFed CLI fills the gap left in HPC systems by the deprecation of the Globus Toolkit.</p>

<p>DataFed Web Portal provides full access to DataFed through a graphical user interface. Whereas DataFed CLI is intended primarily for accessing and updating data, DataFed Web Portal is intended to facilitate tasks such as creating and organizing collections of data, sharing data with other users, managing projects, data browsing, and performing metadata queries.</p>

<h1 id='s2'>2 System Overview</h1>
<p>DataFed aggregates and abstracts the federation of distributed data, storage systems, facilities, users, groups, and projects into a single logical unit - with a common nomenclature and uniform access patterns. Some of the components of DataFed represent real physical systems; whereas others are purely abstract. These components are defined as follows:</p>
<ul>
    <li><b>Data Record</b> - A single unit of data with associated unique identity, attributes, metadata, and raw data.</li>
    <li><b>Collection</b> - An organizational unit with a unique identity and attributes that aggregates data records and/or subordinate collections.</li>
    <li><b>Root Collection</b> - A special collection associated with all users and projects that serves as a default parent container.</li>
    <li><b>User</b> - A person that is identified by a unique Globus account, with optionally linked facility accounts.</li>
    <li><b>Group</b> - A set of users with a unique identity and attributes used for project membership and access control purposes.</li>
    <li><b>Project</b> - An abstract unit with a unique identity and attributes composed of one or more member users and providing collective ownership of data.</li>
    <li><b>Access Control</b> - A set of inheritable permissions associated with a data record or collection that applies to specific users and/or groups, or, optionally, to users that are not explicitly specified.</li>
    <li><b>Facility</b> - A physical location that houses one or more data storage systems or compute resources that is federated into DataFed network.</li>
    <li><b>Data Repository</b> - A logical unit with associated unique identity and attributes that represents a federated storage system located at a given facility.</li>
    <li><b>Storage Allocation</b> - A logical relationship between a user or project and a data repository specifying an allowed storage capacity.</li>
</ul>
<p>A key concept of DataFed is the presentation of data in an location-agnostic manner. From a logical viewpoint, users do not need to know where data is physically stored within DataFed - data can be accessed from any supported facility, or the web portal, by using assigned data record identifiers or user-defined aliases. From a performance standpoint, the physical storage location of data likely matters depending on where the data is being accessed from. For this reason, DataFed will support data repository caching to optimize frequently accessed data. In addition, users with allocations on multiple data repositories may opt to migrate data between repositories based on usage locality.</p>

<h2 id='s21'>2.1 Identifiers and Aliases</h2>

<p>All records in DataFed (data, collections, user, projects, etc.) are automatically assigned a system-unique identifier consisting of a prefix and an alphanumeric value. For data records and collections these identifiers are numeric, so users may choose to assign a more human-friendly "alias" that can be used in place of identifiers. Aliases are alphanumeric (with certain restrictions) and case sensitive, and, to avoid collisions, are automatically prefixed with the type ("u" or "p") and value portion of the identifier of the owning user or project, delimited with colons. When aliases are used by the owner, the alias prefix may be omitted.</p>

<p>For example, if a user with an ID of "u/jsmith" creates an alias "mydata", then the full alias would be "u:jsmith:mydata". User "jsmith" can simply use "mydata", but other users would need to use the full alias instead. Note that in DataFed web portal, aliases are typically shown without the prefix. Also DataFed CLI provides a "select" command to automatically prefix subsequent commands with a specific user or project ID.</p>

<h2 id='s22'>2.2 Collective Ownership</h2>

<p>When an individual user creates a data record or collection, that user becomes the owner and is granted full control of the newly created data record or collection. Collective ownership is achieved through the use of <i>projects</i>. A DataFed project is a distinct organizational entity that permits multiple associated users to create and manage data records and collections as a team - without requiring member users to configure individual access control rules. When a project member creates a data record or collection, the project becomes the owner of the new record, rather than the creating user; however, both the project (project owner and administrators) as well as the creating user have administrative rights to the created record. Other project members have access to project data based on project-wide access control lists managed by the project owner and administrators.</p>

<p>Projects support specific roles for associated users:</p>
<ul>
    <li><b>Project Owner</b> - These users have complete control over the project and contained data and collections. The user that initially creates a project becomes an administrator by default, but a project can have multiple administrators assigned.</li>
    <li><b>Administrators</b> - These users have the ability to add and remove project members (but not administrators or other managers), and can also configure access control rules on the projects root collection. A project can have multiple managers assigned by administrators.</li>
    <li><b>Members</b> - These users may create and update data records and collections based on the access control rules set by managers or administrators. Always has administrative access to created records.</li>
</ul>

<h2 id='s23'>2.3 Metadata</h2>

<p>Data records support user-defined metadata. "Metadata" is distinct from built-on record attributes such as title and description, and is represented using Javascript Object Notation (JSON). JSON was selected because it is human-readable and can represent arbitrary structured documents. When creating or updating a data record, metadata may be directly specified in textual form, or, with DataFed CLI, a JSON file may be used as the metadata source. When updating, the user has the option to either replace existing metadata or to merge new metadata with existing metadata. In the case of merging, any keys that are present both the new and existing metadata will be overwritten by the new values - other existing keys are left unchanged and new keys are inserted.</p>

<p><i>Note that when providing metadata, it must fully comply with the JSON specification, located <a href="https://tools.ietf.org/html/rfc8259" target="_blank">here</a>.</i></p>

<h2 id='s24'>2.4 Collection Hierarchies</h2>

<p>When initially encountered, collection hierarchies within DataFed may resemble a file system with directories containing files and sub-directories. While similar structurally, there are profound functional differences between DataFed collection hierarchies and typical file systems:</p>
<ul>
    <li>In a file system, a file cannot be accessed without <i>traversing</i> the directory structure in which it is contained (the file's path). Essentially the path of the file determines who can access the file through coarse-grained permission set on the individual path directories and the file itself. In DataFed, a data record can be addressed directly by its unique identifier or alias, and instead of "traversing" the containing collection hierarchy for permissions, permissions are either "inherited" from the hierarchy, set directly on the data record, or both.</li>
    <li>In a file system, a file typically resides at a single path. Some file systems support linking, which allows file contents to be shared by multiple file instances, but the linked files may have different filenames. DataFed allows data records (but not collections) to be contained in multiple collection hierarchies. This is achieved by a mechanism similar to linking in a file system; except that there is only one instance of the data record.</li>
    <li>In a file system, there is no way to consistently and unambiguously identify a specific file instance over time. Because a file's identity is defined only by it path, if the file is moved, it essentially has a new identity. On the other hand, a file could be overwritten by a new file with the same path but entirely different contents - in this case the new file has the identity of a previous file, but may be entirely unrelated. DataFed associates a unique, immutable, and non-recyclable identifier with data records and collections. No matter which collections it is placed in, or how many times it is update, or where the associated raw data is physically stored, a record's identity is always known.</li>
</ul>

<h2 id='s25'>2.5 Access Control</h2>

<p>DataFed implements fine-grained access control through a set of permissions that can be applied to both data records and collections. Permissions can be configured to apply to anyone, specific users, groups of users, or a combination of any of these. Data records and collections share the same set of permissions; however, collections have an additional set of permissions specifically for permission inheritance. The individual permissions are defined as follows:</p>
<ul>
    <li><b>VIEW</b> - Allows users to list a data record or collection and view basic information.</li>
    <li><b>READ_META</b> - Allows users to read any metadata associated with a data record.</li>
    <li><b>READ_DATA</b> - Allows users to read raw data associated with a data record, or to list the contents of a collection.</li>
    <li><b>WRITE_META</b> - Allows users to create or update metadata associated with a data record.</li>
    <li><b>WRITE_DATA</b> - Allows users to create or update raw data associated with a data record, or to add or remove items within a collection.</li>
    <li><b>ADMIN</b> - Allows users to edit basic information, set access controls, move, and/or delete a data record or collection.</li>
</ul>
<p>The above permissions may be combined and applied to a data record or collection using one of the following permission scopes:</p>
<ul>
    <li><b>Default</b> - Permissions apply to everyone.</li>
    <li><b>User</b> - Permission apply to a specified user.</li>
    <li><b>Group</b> - Permission apply to a specific group.</li>
</ul>
<p>While there is only one "default" set of permissions on a data record or collection, multiple user- and group- scoped permission may be applied. Permissions for a given user are evaluated by combining all permission set for all scopes that apply - including permissions that may be inherited from parent collection hierarchies. Because permissions are inherited and additive, the absence of a permission on a given data record or collection is not equivalent to denying that permission.</p>

<p>Access controls are typically applied to parent collections of a collection hierarchy where contained data and sub-collections inherit the permissions defined by the top-level parent. Collections have both "local" and "inherited" permissions; where local permissions control access to the collection record itself, and "inherited" permissions are the permissions passed down to all contained data records and sub-collections. Note that because data records can be placed into multiple collections, the inherited permissions of <i>all</i> associated parent collections are evaluated for <i>all</i> users accessing a given data record.</p>

<h2 id='s26'>2.6 Storage Allocations</h2>

<p>Having access to DataFed does not, in itself, grant users the ability to create or manage data within DataFed. This is due to the fact that DataFed does not provide any data storage of its own, but instead relies on <i>federated</i> storage provided by DataFed member organizations. Federated storage is implemented through a network of geographically distributed "data repositories" that are owned and maintained by specific DataFed member organizations, yet potentially accessible by all DataFed users. It is DataFed member organizations that individually determine how storage allocations are assigned to specific users.</p>

<p>Typically, DataFed users with an account at one or more DataFed member organizations will be automatically granted storage allocations on data repositories managed by those organizations. For unaffiliated users, storage allocations may be explicitly requested from a DataFed member organizations. DataFed member organizations are free to define and enact their own data storage policies; therefore, users wishing to acquire storage a specific allocation must contact the associated organization for information on how to proceed. Even though unaffiliated users with no storage allocation cannot use DataFed to create and manage their own data, DataFed is still allows these users to locate, access, and monitor data owned by other DataFed users or projects.</p>

<p>It is typical for DataFed users to have multiple storage allocations on different data repositories. In this case, a default storage allocation may be specified, or a specific storage allocation selected when creating new DataFed data records. Data can be accessed in a consistent manner no matter which data repository it is stored on; however, the physical location of a data repository in relation to the point of use of data can impact initial access time.</p>

<h1 id='s3'>3. Registration</h1>

<p>User registration is required in order to access DataFed. Registration is free and secure, but requires users to have, or obtain, a free <a href="https://www.globus.org" target="_blank">Globus</a> account. Many universities and research facilities, worldwide, are "member organizations" of Globus and typically provide Globus accounts for their students, staff, and/or users. If your home institute does not provide Globus accounts, you can obtain a personal Globus account through Globus ID, located <a href="https://www.globusid.org" target="_blank">here</a>.</p>

<p>DataFed registration utilizes a standard Globus authentication and authorization process. When you click the "register" button on DataFed welcome page, you will be redirected to Globus for authentication (log-in) based on your Globus account. Globus will then ask you to authorize DataFed to access your Globus identity and to allow DataFed to transfer data on your behalf. Once this process is complete, you will be redirected to a DataFed post-registration page where you will create a DataFed password. This password is only used when manually authenticating from DataFed command-line interface, and it can be updated from DataFed Web Portal at any time.</p>

<p>Note that DataFed will only initiate data transfers when you (or a process running as you) explicity request it to. Further, DataFed data transfers are constrained to be between DataFed data storage repositories and Globus endpoints that you have pre-authorized (or "activated") for access. Globus end-point activation is transient and access will expire within a period determined by the host institute.</p>

<h1 id='s4'>4. Web Portal</h1>

<p>The focal-point of the DataFed Web Portal is the "Data Browser" that allows users to navigate through data, collections, and projects that they own or have access to. Depending on a users role and/or access permission, a variety of actions may be performed on the data, collections, and projects presented in the Data Browser (i.e. editing, sharing, etc.). Additional features include searching with metadata-based queries, viewing recent data transfers, and managing settings. Sections 4.1 through 4.6 describe the location and function(s) of the major elements of the web portal. Note that the web portal is implemented as a <i>single-page</i> application; therefore, web browser navigation functions (i.e. forward/back) should not be used.</p>

<p><i>Note that DataFed web portal uses browser cookies to store user identity and context information. Once these cookies are set, DataFed web portal tracks a user's Globus authentication status and, while logged-in to Globus, users will be granted access to DataFed portal without requiring an additional log-in. If a user wishes to disable web portal access, they must explicitly log-out of Globus using the "log-out" link <h href="https://www.globus.org/" target="_blank">here</h>.</i></p>

<h2 id='s41'>4.1 Data Browser</h2>

<p>The "Data Browser", located on the left hand side of the interface, contains a navigable tree structure organized into categories. When an item in the browser tree is selected (by either clicking on them, or using keyboard navigation), information about the item is displayed in the "Selection Information" panel located to the right of the browser panel. In addition, the "action buttons" located below the data browser may be enabled or disabled depending on what actions are valid for the selected item.</p>

    <h2 id='s411'>4.1.1 Drag and Drop</h2>

    <p>Data records and collections in the browser tree may be organized by dragging items from one location to another. For example, data records in one collection may be dragged into another collection, or an entire collection may be dragged into another collection - whereupon the receiving collection becomes the parent of the moved data record or collection. By default, data records are linked into new locations when dragged, rather than moved. To move a data record, the "Shift" key must be held while dragging the data record. (Collections cannot be linked and are always moved.)</p>

    <p>A data record or collection can be "unlinked" from a parent collection by holding thr "Ctrl" key and clicking the data record. This does not delete the unlinked data record or collection, it simply removes it from the parent collection. In the case of collections, or data records that are not linked to other collections, unlinking will re-link the item to the root collection. This is because all data records and collections must have a parent collection (except for root collection itself).
    </p>

    <h3 id='s412'>4.1.2 My Data</h3>

    <p>This category shows data records and collections owned by the current user. All actions are permitted on these data records and collections.</p>

    <h3 id='s413'>4.1.3 My Projects</h3>

    <p>This category shows projects that are owned by the current user. All actions are permitted on these projects.</p>

    <h3 id='s414'>4.1.4 Managed Projects</h3>

    <p>This category shows projects that are managed by the current user. Project managers are allowed to add/remove project members and set permissions on the root collection.</p>

    <h3 id='s415'>4.1.5 Member Projects</h3>

    <p>This category shows projects that the current user is a member of. Project members are allowed to create and access data and collections per the permissions set by the project owner and/or manager.</p>

    <h3 id='s416'>4.1.6 Shared Data</h3>

    <p>This category of the shows data and collections that have been explicitly shared with the current user. The current user is allowed to view and/or perform actions on the listed data and collections per the permissions set by the associated user or project sharing the data.</p>

    <h3 id='s417'>4.1.7 Search Results</h3>

    <p>This category shows any matching data records returned from a query initiated under the "Search" tab. Actions are permitted based on permissions set by the owners of matched data records. Note: collections will never be returned as matches.</p>

<h2 id='s42'>4.2 Selection Information</h2>

<p>When an item in the Data Browser tree is selected, if any information about that item is available (and the current user has sufficient permissions), it is displayed in the "Selection Information" panel located on the right-hand side of the web portal. The information will include the identity of the item and, optionally, a title (or name), a description, item details, and metadata. The "Description", "Details", and "Metadata" tabs may be collapsed and expanded by clicking on them.</p>

<h2 id='s43'>4.3 Action Buttons</h2>
    <h3 id='s431'>4.3.1 New</h3>
    <p>Allows user to create new data records, collections, and projects. When selecting "data" or "collection" option, the current selection in the data browser will determine the default parent collection shown in the associated dialog.</p>
    <h3 id='s432'>4.3.2 Edit</h3>
    <p>Allows users with ADMIN and/or WRITE_META permission to edit a data record or collection, or a project administrator to edit a project.</p>
    <h3 id='s433'>4.3.3 Copy</h3>
    <p>Allows users with VIEW, READ_META, and READ_DATA permission to copy a selected data record as a new data record.</p>
    <h3 id='s434'>4.3.4 Delete</h3>
    <p>Allows users with ADMIN permission to delete a data record or collection, or a project administrator to delete a project.</p>
    <h3 id='s435'>4.3.5 Share</h3>
    <p>Allows users with ADMIN permission to configure access controls for a data record or collection.</p>
    <h3 id='s436'>4.3.6 Get</h3>
    <p>Allows users with READ_DATA permission to "get" (download) the raw data of a data record.</p>
    <h3 id='s437'>4.3.7 Put</h3>
    <p>Allows users with WRITE_DATA permission to "put" (upload) the raw data of a data record.</p>

<h2 id='s44'>4.4 Search</h2>
    <p>The "Search" tab below the action buttons allows users to query DataFed for data matching a specified metadata expression within a specified scope.</p>
    <p style="color:red">Note: the query language is currently a subset of ArangoDB AQL; however, this will be changing in the near future.</p>

<h2 id='s45'>4.5 Transfers</h2>
    <p>The "Transfers" tab below the action buttons shows recent data transfers (get/put) initiated either from DataFed Web Portal or via the CLI.</p>
<h2 id='s46'>4.6 Settings</h2>
    <p>The "Settings" tab below the action buttons allows the current user to update a number of DataFed configuration parameters, as follows:</p>
    <ul>
        <li><b>CLI Password</b> - This is the password that is required when manually authenticating through DataFed CLI. This password is only required until the CLI "setup" command is used to generate and install local credentials.</li>
        <li><b>Revoke All Credentials</b> - This button will reset ALL installed CLI credentials. The CLI "setup" command must be used to generate and install new credentials per environment.</li>
        <li><b>User Interface Theme</b> - Allows the UI theme to set to "light" (default) or "dark".</li>
        <li><b>E-mail Address</b> - The E-mail address that will be used to contact the current user.</li>
    </ul>
    <p>These settings are saved automatically whenever they are changed.</p>
<h2 id='s47'>4.7 Header and Footer</h2>
    <p>The "header" is the section of the user interface at the very top of the page amd contains the title, a "help" button (which opens this document), and a "log-out" button. The "footer" is located at the very bottom of the page amd contains the status bar that displays the current user name and informational messages.</p>
<br>
<h1 id='s5'>5. Command Line Interface (CLI)</h1>

<h2 id='s51'>5.1 CLI Introduction</h2>

<p>The DataFed command-line-interface (CLI) provides access to basic DataFed features for both interactive use and scripting. The DataFed CLI is provided via a Python3 package, called "datafed", available on PyPi and installable using the Python pip tool. The "datafed" package also contains a Python API that can be used to build custom Python applications that directly interface with DataFed. (A C++ client library is also available from the DataFed code repository.)</p>

<h2 id='s52'>5.2 CLI Installation</h2>

<p>The DataFed CLI is typically pre-installed within the compute and data environments of DataFed-supported facilities; however, if you need to use the DataFed CLI from a non-supported facility or device, then you will need to install and configure the CLI manually. Like most Python packages, the DataFed CLI is installed using Python's "pip" tool, as follows:<p>

<pre style='margin:0 5em'>pip install datafed</pre>

<p>
Once the DataFed package and its dependencies are installed, the "datafed" script will be available in the Python path to run the CLI either interactively or from scripts (with the --script, or -s, option). Note, however, that the DataFed CLI must be properly <a href='#s521'>configured</a> before it can be used. After configuration, refer to the <a href='#s3'>Commands</a> section, below, for details on how to use the DataFed CLI (a '--help' option is also available). Several DataFed Python modules are available for direct access to DataFed services from custom Python scripts, and these modules are documented in the <a href='#s54'>Client API</a> section, below.
</p>

<h2 id='s53'>5.3 CLI Configuration</h2>

<p>
Users would typically not need to configure the DataFed CLI from within a facility-supported environment; however, when installing the CLI within an unsupported environment, such as a laptop, the CLI must be configured by the user. Configuration settings may be specified using environment variables, configuration files, or command-line options (or any combination thereof), and the majority of these settings relate to client-server communication. The following sections list and describe the DataFed CLI settings.</p>

<h3 id='s531'>5.3.1 Configuration Settings</h3>

<p>
Table 5.3.1-1, below, lists all of the CLI settings and how they can be set using either a configuration file (.ini), an environment variable, or a command-line option. Many of the listed settings relate to configuring the communication channel between the CLI and the DataFed server (aka Core Services). Because all communications across the channel are encrypted, the locations of public and private DataFed encryption key files must be specified. These keys are similar to SSH keys, but they are unique to DataFed; however, like SSH keys, access to private DataFed key files must be restricted to prevent unauthorized access to user accounts. Configuring DataFed key files, as well as other settings, are discussed in following sections.
</p>

<table class='border-table'>
<tr><th colspan="2">Config File</th><th rowspan="2">Environment Variable</th><th rowspan="2">CLI Option(s)</th><th rowspan="2">Description</th></tr>
<tr><th>Section</th><th>Setting</th></tr>
<tr><td>N/A</td><td>N/A</td><td>DATAFED_SERVER_CFG_FILE</td><td>--server-cfg-file</td><td>Server configuration file</td></tr>
<tr><td>server</td><td>config_dir</td><td>DATAFED_SERVER_CFG_DIR</td><td>--server-cfg-dir</td><td>Server configuration directory</td></tr>
<tr><td>server</td><td>public_key_file</td><td>DATAFED_SERVER_PUB_KEY_FILE</td><td>--server-pub-key-file</td><td>Server public key file</td></tr>
<tr><td>server</td><td>host</td><td>DATAFED_SERVER_HOST</td><td>--server-host, -H</td><td>Sever host name or IP address</td></tr>
<tr><td>server</td><td>port</td><td>DATAFED_SERVER_PORT</td><td>--server-port, -P</td><td>Server port number</td></tr>
<tr><td>client</td><td>config_file</td><td>DATAFED_CLIENT_CFG_FILE</td><td>--client-cfg-file</td><td>Client configuration file</td></tr>
<tr><td>client</td><td>config_dir</td><td>DATAFED_CLIENT_CFG_DIR</td><td>--client-cfg-dir</td><td>Client configuration directory</td></tr>
<tr><td>client</td><td>public_key_file</td><td>DATAFED_CLIENT_PUB_KEY_FILE</td><td>--client-pub-key-file</td><td>Client public key file</td></tr>
<tr><td>client</td><td>private_key_file</td><td>DATAFED_CLIENT_PRIV_KEY_FILE</td><td>--client-priv-key-file</td><td>Client private key file</td></tr>
<tr><td>general</td><td>default_endpoint</td><td>DATAFED_DEFAULT_ENDPOINT</td><td>--default-ep, -e</td><td>Default Globus endpoint</td></tr>
<tr><td>general</td><td>verbosity</td><td>DATAFED_DEFAULT_VERBOSITY</td><td>--verbosity, -v</td><td>Verbosity level (0=quiet,1=normal,2=verbose) for text-format output only.</td></tr>
</tr>
</table><br>
<center><b>Table 5.3.1-1 DataFed Client Configuration Settings</b></center>

<h4 id='s5311'>5.3.1.1 Server Configuration File</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>N/A</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_SERVER_CFG_FILE</td></tr>
<tr><td>Option</td><td>--server-cfg-file</td></tr>
</table>

<p>
The server configuration file setting specifies a full path to a server ".ini" file. This file may contain additional settings as specified in Table 5.3.1-1.
</p>

<h4 id='s5312'>5.3.1.2 Server Configuration Directory</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[server] config_dir</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_SERVER_CFG_DIR</td></tr>
<tr><td>Option</td><td>--server-cfg-dir</td></tr>
</table>

<p>
The server configuration directory setting specifies a path to a directory that will be searched for a default server config file, "server.ini", and the default server public key, "datafed-core-key.pub". If this setting is not provided, "~/.default" will be searched if it exists.
</p>

<h4 id='s5313'>5.3.1.3 Server Public Key File</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[server] public_key_file</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_SERVER_PUB_KEY_FILE</td></tr>
<tr><td>Option</td><td>--server-pub-key-file</td></tr>
</table>

<p>
The server public key file setting specifies a full path to a locally accessible file containing the latest DataFed server public key. If this setting is not provided, the CLI will look for a default key file, "datafed-core-key.pub", in the server config directory (or "~/.datafed" if no directory is specified). The latest DataFed server public key file must is available for download from the following link:
</p>
<a href='/datafed-core-key.pub' style='margin:0 5em'>Download DataFed Server Public Key</a>

<p>
Note that if the server public key is invalid or out of date, the CLI will timeout after 10 seconds from being run.
</p>

<h4 id='s5314'>5.3.1.4 Server Host</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[server] host</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_SERVER_HOST</td></tr>
<tr><td>Option</td><td>--server-host, -H</td></tr>
</table>

<p>
The server host setting is the DataFed server name or IP address with no protocol prefix or port number - for example: "datafed.ornl.gov". Note that if the server host is incorrect, the CLI will timeout after 10 seconds from being run.
</p>

<h4 id='s5315'>5.3.1.5 Server Port</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[server] port</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_SERVER_PORT</td></tr>
<tr><td>Option</td><td>--server-port, -P</td></tr>
</table>

<p>
The server port setting is the TCP port number used by the DataFed server for secure client connections. This port number is distinct from two other ports used by the DataFed server for back-end services cross-communication. Note that if the server port number is incorrect, the CLI will timeout after 10 seconds from being run.
</p>

<h4 id='s5316'>5.3.1.6 Client Configuration File</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[client] config_file</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_CLIENT_CFG_FILE</td></tr>
<tr><td>Option</td><td>--client-cfg-file</td></tr>
</table>

<p>
The client configuration file setting specifies a full path to a server ".ini" file. This file may contain additional settings as specified in Table 5.3.1-1. Note that settings in the client configuration file will override the same settings in the server configuration file, if present.
</p>

<h4 id='s5317'>5.3.1.7 Client Config Directory</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[client] config_dir</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_CLIENT_CFG_DIR</td></tr>
<tr><td>Option</td><td>--client-cfg-dir</td></tr>
</table>

<p>
The client configuration directory setting specifies a path to a directory that will be searched for a default client config file, "client.ini", and the default client public and private keys, "datafed-user-key.pub" and "datafed-user-key.priv". If this setting is not provided, "~/.default" will be searched if it exists.
</p>


<h4 id='s5318'>5.3.1.8 Client Public Key File</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[client] public_key_file</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_CLIENT_PUB_KEY_FILE</td></tr>
<tr><td>Option</td><td>--client-pub-key-file</td></tr>
</table>

<p>
The client public key file setting specifies a full path to a locally accessible file containing the DataFed client public key. If this setting is not provided, the CLI will look for a default key file, "datafed-user-key.pub", in the client config directory (or "~/.datafed" if no directory is specified). Client key files are automatically created in the specified location by the CLI (see <a href="#s534">Configuring Automatic Authentication</a>
</p>

<h4 id='s5319'>5.3.1.9 Client Private Key File</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[client] private_key_file</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_CLIENT_PRIV_KEY_FILE</td></tr>
<tr><td>Option</td><td>--client-priv-key-file</td></tr>
</table>

<p>
The client private key file setting specifies a full path to a locally accessible file containing the DataFed client private key. If this setting is not provided, the CLI will look for a default key file, "datafed-user-key.priv", in the client config directory (or "~/.datafed" if no directory is specified). Client key files are automatically created in the specified location by the CLI (see <a href="#s534">Configuring Automatic Authentication</a>
</p>

<h4 id='s53110'>5.3.1.10 Default Endpoint</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[general] default_endpoint</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_DEFAULT_ENDPOINT</td></tr>
<tr><td>Option</td><td>--default-ep, -e</td></tr>
</table>

<p>
The default endpoint setting determines which Globus endpoint to prepend to the source or destination path of a "put" or "get" command, respectively, when no endpoint is specified. The default end-point can be changed with the "ep default" command, or temporarily overridden use the "ep set" command.
</p>

<h4 id='s53111'>5.3.1.11 Default Verbosity</h4>

<table class='border-table cfg-info-table'>
<tr><td>Cfg. File</td><td>[general] verbosity</td></tr>
<tr><td>Env. Var.</td><td>DATAFED_DEFAULT_VERBOSITY</td></tr>
<tr><td>Option</td><td>--verbosity, -v</td></tr>
</table>

<p>
The default verbosity level setting adjusts the output detail level for text-format output only. The value is an integer, where 0 = quiet, 1 = normal, and 2 = verbose.
</p>

<div class='clearfix'>
    <h3 id='s532'>5.3.2 Configuration Files</h3>

    <div style='float:right;margin:0 1em 1em 1em'>
<pre style="border:1px solid #808080;padding:1em;margin:0 1em 1em 0">
[server]
host = datafed.ornl.gov
port = 7512
config_dir = /usr/share/datafed

[client]
config_dir = ~/.datafed

[general]
default_endpoint = cades#CADES-OR
</pre>
        <center><b>Example Configuration File</b></center>
    </div>

    <p>
    Both a server and a client configuration file may be used to specify CLI settings. Typically, a server configuration file would be maintained by a system administrator and contain server-only settings. Per-user client configuration files would allow individuals to tailor their CLI settings by specifying additional options, or overriding server settings (the client file takes priority over the server file). 
    </p>
    <p>
    Both server and client configuration files are standard ".ini" files and follow the same format, and Table 5.3.1-1 (above) shows the section and setting name for all available options. An example configuration file is shown to the right.
    </p>
</div>

<div class='clearfix'>
    <h3 id='s533'>5.3.3 Configuration Priority</h3>

    <div style='float:right; margin:0 1em 1em 1em'>
        <table class='border-table'>
        <tr><th>Source</th><th>Priority</th></tr>
        <tr><td>Default</td><td>0 (lowest)</td></tr>
        <tr><td>Environment Variable</td><td>1</td></tr>
        <tr><td>Server Config File</td><td>2</td></tr>
        <tr><td>Client Config File</td><td>3</td></tr>
        <tr><td>Command-Line Option</td><td>4</td></tr>
        <tr><td>Programmatic</td><td>5 (highest)</td></tr>
        </table><br>
        <center><b>Source Priorities</b></center>
    </div>

    <p>
    Each mechanism for specifying settings (environment variables, files, options, etc.) has a given priority, and individual settings from configuration sources with higher priorities override those with lower priorities. The result is that various configuration settings may come from a variety of sources (defaults or set by system administrators), but these settings can always be overridden by the user by using the appropriate mechanism. Configuration source priorities are shown to the right.
    </p>
    <p>
    Note that most settings do not have default values and must be specified using one of the supported mechanisms. The server and client configuration files and directories are exceptions in that the CLI will search for a ".datafed" folder in the user home directory if these settings are not specified.
    </p>
</div>


<h3 id='s534'>5.3.4 Configuring Automatic Authentication</h3>

<p>Once the DataFed CLI is installed and configured, automatic authentication can be enabled for the CLI by installing local client credentials (encryption key files). This is done by simply running the following CLI command from the environment to be configured for automatic authentication:</p>

<pre style='margin:0 5em'>datafed setup</pre>

<p>When run, manual authentication will be required, then the CLI will install local user encryption keys (public and private) in the configured client configuration directory (see <a href='#s531'>Configuration Settings</a>, above). Subsequent use of the DateFed CLI within the same environment will authenticate using the local client keys. These client key files must be protected and kept private. In the event of a security incident, automatic authentication can be disabled by deleting the local key files, or, alternatively, all of a user's installed keys can be revoked from the DataFed Web Portal using the "Revoke Credentials" button in the application settings dialog. (This does not delete local key files, but invalidates the keys on the server side.)</p>

<h2 id='s54'>5.4 CLI Commands</h2>

<h3 id='s541'>5.4 CLI Commands Summary</h3>
<p>
Table 5.4-1, below, lists all of the CLI commands. To execute, type the command (and subcommand, if applicable) followed by the arguments, and each option switch (—option, or shortcut -o) followed by its arguments. For example, the command to make a data new record, would be:
<pre>   data create “This is the Title” -a “alias” -d “This is the description”</pre>
<p>Some commands work with or without arguments. For example, the <em>ls</em> command can be used in interactive mode without an argument. Doing so will return a list go the contents of the current working collection — and if no current working collection has been specified, the root collection will be used.
<br><br>In all contexts where <strong>ID</strong> is used as an argument, either the DataFed ID or alias may be used. DataFed unique IDs have the following format: <em>d/12345678</em>, where the first letter is used to indicate the object type (<em>d</em> for data records, <em>c</em> for collections, <em>p</em> for projects, etcetera). Aliases are unique to users and projects, and have the following format in full: <em>u:username:alias</em>. When in an interactive session, as yourself or with a project selected, the CLI will automatically append the correct prefix to any alias names given (e.g. <em>p:selectedproject:you_only_have_to_type_the_alias_name</em>). 
<br><br>Certain commands used in interactive mode will return an indexed list. This means that index numbers may be used as stand-ins for the ID argument of subsequent commands (until replaced by a new indexed list). For example, the <em>ls</em> command in interactive mode may return the following indexed list:</p>
<table style="width:100%">
<tr align="left"><th colspan="4">Indexed listings are formatted as:</th></tr>
<tr></tr><tr></tr>
<tr align="left"><td>No.</td><td>DataFed ID</td><td colspan=”3”>(alias)</td><td colspan=”4”>Title</td>
<tr></tr>
<tr></tr>
<tr></tr>
<tr></tr>
  <tr>
    <td>1.</td>
    <td>c/23850921</td>
    <td>(ref)</td>
<td>References</td>
  </tr>
  <tr>
    <td>2.</td>
    <td>c/64179968</td>
    <td>(image_01)</td>
<td>Synthesized Image</td>
  </tr>
  <tr>
    <td>3.</td>
    <td>d/98275024</td>
    <td>(run_5)</td>
<td>LLTO</td>
  </tr>
  <tr>
    <td>4.</td>
    <td>d/72936193</td>
    <td>(run_6)</td>
<td>K411 Glass</td>
  </tr>
  <tr>
    <td>5.</td>
    <td>d/64893725</td>
    <td>(run_7)</td>
<td>Wse2-He</td>
  </tr>
  <tr>
    <td>6.</td>
    <td>d/64179968</td>
    <td>(si)</td>
<td>Silicon and Dielectric Dry-Etch</td>
  </tr>
</table>

<p>To get more information on the record titled “K411 Glass”, the index number can be used in the subsequent command, e.g.:
<pre>   data view 4 </pre>
will return information about the K411 Glass data record.
<br><br>Certain commands in interactive mode (those with offset/count options) can be used in conjunction with the <em>more</em> command. This will return the next <em>n</em> results from the previous offset. For example, if the --count option for the previous <em>ls</em> command had been specified as:
<br><pre>   ls --count 2 </pre>
<p>
the returned listing would be:
</p>
<table style="width:100%">
  <tr>
    <td>1.</td>
    <td>c/23850921</td>
    <td>(ref)</td>
<td>References</td>
  </tr>
  <tr>
    <td>2.</td>
    <td>c/64179968</td>
    <td>(image_01)</td>
<td>Synthesized Image</td>
  </tr>
 </table>
<p>
In order to see the next 4 results, we can use the <em>more</em> command.
<br><pre>	more 4 </pre>
<p>would return:</p>
<table style=”width:100%”>
  <tr>
    <td>1.</td>
    <td>d/98275024</td>
    <td>(run_5)</td>
<td>LLTO</td>
  </tr>
  <tr>
    <td>2.</td>
    <td>d/72936193</td>
    <td>(run_6)</td>
<td>K411 Glass</td>
  </tr>
  <tr>
    <td>3.</td>
    <td>d/64893725</td>
    <td>(run_7)</td>
<td>Wse2-He</td>
  </tr>
  <tr>
    <td>4.</td>
    <td>d/64179968</td>
    <td>(si)</td>
<td>Silicon and Dielectric Dry-Etch</td>
  </tr>
</table>
<p>Note that the previous index has been replaced -- so if we again issue the command
<br><pre>   data view 4 </pre>
<p>it will return information about the data record titled “Silicon and Dielectric Dry-Etch”.
</p>


<table class='border-table'>
<tr><th colspan=“3”>Command Group</th><th rowspan=“3”>Subcommand</th><th rowspan=“3”>Description</th></tr>
<tr><td>N/A</td><td>help</td><td>desc</td></tr>
<tr><td>N/A</td><td>ls</td><td>List current collection, or collection specified by ID</td></tr>
<tr><td>N/A</td><td>wc</td><td>Print or change current working collection (Interactive mode only)</td></tr>
<tr><td>N/A</td><td>wp</td><td>desc (Interactive mode only)</td></tr>
<tr><td>N/A</td><td>output</td><td>desc (Interactive mode only)</td></tr>
<tr><td>N/A</td><td>verbosity</td><td>desc (Interactive mode only)</td></tr>
<tr><td>N/A</td><td>exit</td><td>desc (Interactive mode only)</td></tr>
<tr><td>collection</td><td>view</td><td>View collection record</td></tr>
<tr><td>collection</td><td>create</td><td>Create a new collection</td></tr>
<tr><td>collection</td><td>update</td><td>Update existing collection ID</td></tr>
<tr><td>collection</td><td>delete</td><td>Delete collection ID and all data records contained within</td></tr>
<tr><td>collection</td><td>add</td><td>Add (link) a data record to collection</td></tr>
<tr><td>collection</td><td>rem</td><td>Remove (unlink) a data record from collection</td></tr>
<tr><td>data</td><td>view</td><td>View data record</td></tr>
<tr><td>data</td><td>create</td><td>Create a new data record</td></tr>
<tr><td>data</td><td>update</td><td>Update an existing data record</td></tr>
<tr><td>data</td><td>delete</td><td>Delete existing data record/s</td></tr>
<tr><td>data</td><td>get</td><td>Get (download) raw data of DataFed record</td></tr>
<tr><td>data</td><td>put</td><td>Put (upload) raw data to DataFed</td></tr>
<tr><td>data</td><td>batch create</td><td>Create data records using JSON file/s of record metadata</td></tr>
<tr><td>data</td><td>batch update</td><td>Update data records using JSON file/s of record metadata</td></tr>
<tr><td>project</td><td>list</td><td>List projects</td></tr>
<tr><td>project</td><td>view</td><td>View information for project ID</td></tr>
<tr><td>project</td><td>select</td><td>Move into project space — subsequent commands will be executed relative to selected project (Interactive mode only)</td></tr>
<tr><td>user</td><td>all</td><td>List all DataFed user ids</td></tr>
<tr><td>user</td><td>collab</td><td>List all users associated with common projects</td></tr>
<tr><td>user</td><td>view</td><td>View information for user ID</td></tr>
<tr><td>xfr</td><td>list</td><td>List recent transfers</td></tr>
<tr><td>xfr</td><td>status</td><td>Get status of transfer ID, or most recent if ID omitted</td></tr>
<tr><td>shared</td><td>user</td><td>List users with shared data</td></tr>
<tr><td>shared</td><td>project</td><td>List projects with shared data</td></tr>
<tr><td>shared</td><td>list</td><td>list data shared by user/project ID</td></tr>
<tr><td>ep</td><td>list</td><td>List recent endpoints</td></tr>
<tr><td>ep</td><td>set</td><td>Set current session endpoint (Interactive mode only)</td></tr>
<tr><td>ep</td><td>get</td><td>Get current session endpoint (Interactive mode only)</td></tr>
<tr><td>ep</td><td>default set</td><td>Set default Globus endpoint</td></tr>
<tr><td>ep</td><td>default get</td><td>Get default Globus endpoint</td></tr>
<tr><td>query</td><td>list</td><td>List saved queries</td></tr>
<tr><td>query</td><td>execute</td><td>Execute a saved query and return a list of results</td></tr>
</table><br>

<center><b>Table 5.4-1 DataFed CLI Commands Summary</b></center>

<h3 id='s5410'>5.4.1 General Commands</h3>

<h4 id='s5411'>5.4.1.1 help</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>N/A</td><td>N/A</td><td>Command Name</td><td>Shows the help documentation for the command given.</td></tr>
</table>

<p>
Returns the help documentation for the command specified. NOTE that this is only for main commands -- data, coll, ep, etc. -- and not subcommands. In order to see help info for specific subcommands, type the subcommand followed by <strong>-?</strong> or <strong>--help</strong>.
</p>


<h4 id='s5412'>5.4.1.2 ls</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>(Optional) The DataFed ID or alias for the collection to be listed. If no ID is provided, the current working collection (interactive mode only) will be used.</td></tr>
<tr><td>-O</td><td>--offset</td><td>integer</td><td>Start list at offset</td></tr>
<tr><td>-C</td><td>--count</td><td>integer</td><td>Limit list to count results</td></tr>
<tr><td>-p</td><td>--project</td><td>text</td><td>Project ID, if the collection being listed belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
The <ls>ls</em> command returns a listing of the contents of the specified collection. In interactive mode, <em>ls</em> returns an indexed list and can be used with the <em>more</em> command.
</p>

<h4 id='s5413'>5.4.1.3 wc</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>(Optional) ID of the collection to be set as the current working collection (interactive mode only).</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Set (if ID argument given) or print the current working collection or path. 'ID' can be a collection ID, alias, list index number, '-' (previous collection), or path. Only '..' and '/' are supported for paths. 'cd' is an alias for this command.
</p>

<h4 id='s5414'>5.4.1.4 wp</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>N/A</td><td>Print the current working path.</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Returns the lineage (collection hierarchy) of the current working collection (interactive only).
</p>

<h4 id='s5415'>5.4.1.5 output</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>”json” or “text”</td><td>(Optional) Sets or prints the current output mode.</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
If an argument is provided, the output mode will be set accordingly. If no argument is given, the current output mode will be displayed. Interactive mode only.
</p>

<h4 id='s5416'>5.4.1.6 verbosity</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>0, 1, or 2</td><td>(Optional) Sets or prints the current verbosity level.</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Set or display verbosity level. The verbosity level argument can be 0 (lowest), 1 (normal), or 2 (highest). If no argument is given, the current verbosity level will be displayed.
</p>

<h4 id='s5417'>5.4.1.7 exit</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>N/A</td><td>Exits the interactive session.</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Ends the current interactive session.
</p>

<h3 id='s5421'>5.4.2 Collection Commands</h3>

<h4 id='s5421'>5.4.2.1 coll view</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>View information about specified collection</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the collection being viewed belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Returns metadata information for the collection specified by the ID argument. 'ID' can be a collection ID, alias, list index number, '-' (parent collection), or a path. Only '..' and '/' are supported for paths. 
</p>

<h4 id='s5422'>5.4.2.2 coll create</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>Title (text)</td><td>Title for the new collection.</td></tr>
<tr><td>-a</td><td>--alias</td><td>text</td><td>Alias for the new collection. </td></tr>
<tr><td>-c</td><td>--collection</td><td>ID</td><td>Parent collection ID/alias (default is current working collection for interactive mode, else root)</td></tr>
<tr><td>-d</td><td>--description</td><td>text</td><td>Description of the new collection.</td></tr>
<tr><td></td><td>--topic</td><td>text</td><td>Publish the collection (make associated records and data read-only to everyone) under the provided topic. Topics use periods ('.') as delimiters</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the collection being created will belong to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Create a new collection.  
</p>

<h4 id='s5423'>5.4.2.3 coll update</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>ID of the collection to be updated</td></tr>
<tr><td>-t</td><td>--title</td><td>text</td><td>Update the collection title</td></tr>
<tr><td>-a</td><td>--alias</td><td>text</td><td>Update the collection alias</td></tr>
<tr><td>-d</td><td>--description</td><td>text</td><td>Update the collection description</td></tr>
<tr><td></td><td>--topic</td><td>text</td><td>Publish the collection (make associated records and data read-only to everyone) under the provided topic. Topics use periods ('.') as delimiters. To revoke published status, specify '--topic undo'</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the collection being updated belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Update an existing collection.  
</p>

<h4 id='s5424'>5.4.2.4 coll delete</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>(Multiple) ID of the collection(s) to be deleted. May be a collection ID or alias, or an index value from a listing.</td></tr>
<tr><td>-f</td>--force<td></td><td>N/A</td><td>Delete the collection(s) without confirmation</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the collection being deleted belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Delete existing collection(s). Note that this will delete all data records and collections contained in the specified collection(s). In interactive mode, the CLI will prompt for confirmation, unless the --force option is used. In non-interactive modes, the --force options <strong>must</strong> be used in order for the delete to go ahead.
</p>

<h4 id='s5425'>5.4.2.5 coll add</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>Item ID(s)</td><td> (Multiple) ID of the item(s) to be added (linked) to the target collection.</td></tr>
<tr><td></td><td></td><td>Collection ID</td><td>ID of the target collection.</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the target collection belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Add (link) data records and/or collections to a target collection. Multiple items may be added, as long as the last argument provided is the ID/alias of the target collection.
</p>

<h4 id='s5426'>5.4.2.6 coll rem</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>Item ID(s)</td><td> (Multiple) ID of the item(s) to be removed (unlinked) from the target collection.</td></tr>
<tr><td></td><td></td><td>Collection ID</td><td>ID of the target collection.</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the target collection belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Remove (unlink) data records and/or collections from a target collection. Multiple items may be removed, as long as the last argument provided is the ID/alias of the target collection.
</p>

<h3 id=’s5430’>5.4.3 Data Record Commands</h3>

<h4 id='s5431'>5.4.3.1 data view</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>View information about specified data record</td></tr>
<tr><td>-d</td><td>--details</td><td>N/A</td><td>Show additional fields</td>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the data being viewed belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Returns metadata information for the data record specified by the ID argument. 'ID' can be a data record ID, alias, or list index number.
</p>

<h4 id='s5432'>5.4.3.2 data create</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>Title (text)</td><td>Title for the new data record</td></tr>
<tr><td>-a</td><td>--alias</td><td>text</td><td>Alias for the new data record</td></tr>
<tr><td>-d</td><td>--description</td><td>text</td><td>Description of the new data record</td></tr>
<tr><td>-k</td><td>--keywords</td><td>text</td><td>Keywords, in the form of a comma separated list</td></tr>
<tr><td>-r</td><td>--raw-data-file</td><td>text</td><td>Globus path to raw data file (local or remote) to upload with record. Current session endpoint used if none is provided in the path</td></tr>
<tr><td>-e</td><td>--extension</td><td>text</td><td>Override the extension for the raw data file (default is auto-detected from the raw data file)</td></tr>
<tr><td>-m</td><td>--metadata</td><td>text</td><td>Inline metadata in JSON format</td></tr>
<tr><td>-f</td><td>--metadata-file</td><td>filename</td><td>Path to a local JSON file containing metadata</td></tr>
<tr><td>-c</td><td>--collection</td><td>ID</td><td>Parent collection ID/alias (default is current working collection for interactive mode, else root)</td></tr>
<tr><td>-R</td><td>--repository</td><td>ID</td><td>ID of the repository in which the data record should be stored</td></tr>
<tr><td>-D</td><td>--dep</td><td>’der’, ‘comp’, or ‘ver’ and ID</td><td>Specify dependencies by listing first the type of relationship ('der', 'comp', or 'ver') followed by ID/alias of the target record. Can be used multiple times.</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the data record being created will belong to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Create a new data record.  
</p>

<h4 id='s5433'>5.4.3.3 data update</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>ID (or alias, or index number) of the data record to be updated.</td></tr>
<tr><td>-t</td><td>--title</td><td>text</td><td>Title of the data record</td></tr>
<tr><td>-a</td><td>--alias</td><td>text</td><td>Alias for the data record</td></tr>
<tr><td>-d</td><td>--description</td><td>text</td><td>Description of the data record</td></tr>
<tr><td>-k</td><td>--keywords</td><td>text</td><td>Keywords, in the form of a comma separated list</td></tr>
<tr><td>-r</td><td>--raw-data-file</td><td>text</td><td>Globus path to raw data file (local or remote) to upload with record. Current session endpoint used if none is provided in the path</td></tr>
<tr><td>-e</td><td>--extension</td><td>text</td><td>Override the extension for the raw data file (default is auto-detected from the raw data file)</td></tr>
<tr><td>-m</td><td>--metadata</td><td>text</td><td>Inline metadata in JSON format</td></tr>
<tr><td>-f</td><td>--metadata-file</td><td>filename</td><td>Path to a local JSON file containing metadata</td></tr>
<tr><td>-C</td><td>--dep-clear</td><td>N/A</td><td>Clear all dependencies on record. May be used in conjunction with --dep-add to replace existing dependencies.</td></tr>
<tr><td>-A</td><td>--dep-add</td><td>’der’, ‘comp’, or ‘ver’ and ID</td><td>Specify new dependencies by listing first the type of relationship ('der', 'comp', or 'ver') followed by ID/alias of the target record. Can be used multiple times.</td></tr>
<tr><td>-R</td><td>--dep-rem</td><td>’der’, ‘comp’, or ‘ver’ and ID</td><td>Specify dependencies to remove by listing first the type of relationship ('der', 'comp', or 'ver') followed by ID/alias of the target record. Can be used multiple times.</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the data record being created will belong to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Update an existing data record.  
</p>

<h4 id='s5434'>5.4.3.4 data delete</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>(Multiple) ID of the data record(s) to be deleted. May be a record ID or alias, or an index value from a listing.</td></tr>
<tr><td>-f</td>--force<td></td><td>N/A</td><td>Delete the data record(s) without confirmation</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the record being deleted belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Delete existing data record(s). In interactive mode, the CLI will prompt for confirmation, unless the --force option is used. In non-interactive modes, the --force options <strong>must</strong> be used in order for the delete to go ahead.
</p>

<h4 id='s5435'>5.4.3.5 data get</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>(Multiple) ID of the data record(s) to be downloaded. May be a record ID or alias, or an index value from a listing.</td></tr>
<tr><td></td><td></td><td>Path</td><td>Path* to which the data will be downloaded. See description below for details</td></tr>
<tr><td>-w</td>--wait<td></td><td>N/A</td><td>Block reply until the transfer is complete.</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the record being downloaded belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Get (download) raw data of specified data record(s) and place in the given path. *Note that Globus paths require an endpoint followed by a local filepath. For Windows systems, drive letters must be stripped and all backslashes converted to forward-slashes. For example, globus#endpoint/c/Documents/filename. Relative paths beginning with “.”, “..” or “~” will be resolved, but paths beginning with “/” will not. For relative paths, or if no endpoint is detected in the path given, the current session endpoint (interactive mode only) or default will be used. If you wish to use the set/default endpoint with a Globus path beginning with the home directory, enter the path argument as “/~/folder/filename”. For Globus transfers, the directory need not exist at the time of initiating the transfer -- Globus will create new directories/files if needed. For HTTP downloads (of published data accessible via a URL), the directory must already exist, and the filename will be automatically generated using the Data URL -- if there is a duplicate filename already in the directory, the CLI will append “__x” to the filename (where x is the lowest possible number for the filename to be unique).
</p>

<h4 id='s5436'>5.4.3.6 data put</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>ID of the data record to which data file is to be uploaded. May be a record ID or alias, or an index value from a listing.</td></tr>
<tr><td></td><td></td><td>Path</td><td>Globus path* of raw data file to be uploaded.</td></tr>
<tr><td>-w</td>--wait<td></td><td>N/A</td><td>Block reply until the transfer is complete.</td></tr>
<tr><td>-e</td>--extension<td></td><td>text</td><td>Override the extension for the raw data file. By default, the extension is auto-detected.</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Project ID, if the record belongs to a project</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Put (upload) raw data located at the path provided to the specified DataFed record.*Note that Globus paths require an endpoint followed by a local filepath. For Windows systems, drive letters must be stripped and all backslashes converted to forward-slashes. For example, globus#endpoint/c/Documents/filename. Relative paths beginning with “.”, “..” or “~” will be resolved, but paths beginning with “/” will not. For relative paths, or if no endpoint is detected in the path given, the current session endpoint (interactive mode only) or default will be used. If you wish to use the set/default endpoint with a Globus path beginning with the home directory, enter the path argument as “/~/folder/filename”. For Globus transfers, the directory need not exist at the time of initiating the transfer -- Globus will create new directories/files if needed. For HTTP downloads (of published data accessible via a URL), the directory must already exist, and the filename will be automatically generated using the Data URL -- if there is a duplicate filename already in the directory, the CLI will append “__x” to the filename (where x is the lowest possible number for the filename to be unique).
</p>

<h4 id='s5437'>5.4.3.7 data batch create</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>File</td><td>Location of the JSON file containing record metadata for import</td></tr>
<tr><td>-c</td>--collection<td></td><td>ID</td><td>Target collection for the imported record(s).</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Operate on behalf of  the specified project for this command</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Batch create data records from JSON file(s). For more information on JSON data record metadata formatting, see section [INSERT JSON FORMAT SECTION]. Each file may not be over [INSERT MAX FILE SIZE], and the total size of all files combined (at a single execution of the command) may not exceed [INSERT MAX MESSAGE SIZE].
</p>

<h4 id='s5438'>5.4.3.8 data batch update</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>File</td><td>Location of the JSON file containing updated record metadata for import</td></tr>
<tr><td>-c</td>--collection<td></td><td>ID</td><td>Target collection for the imported record(s).</td></tr>
<tr><td>-p</td><td>--project</td><td>ID</td><td>Operate on behalf of the specified project for this command</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Batch update existing data records from JSON file(s). Note that the “ID” portion of target record(s) may be the existing alias. For more information on JSON data record metadata formatting, see section [INSERT JSON FORMAT SECTION]. Each file may not be over [INSERT MAX FILE SIZE], and the total size of all files combined (at a single execution of the command) may not exceed [INSERT MAX MESSAGE SIZE].
</p>

<h3 id='s5440'>5.4.4 Project commands</h3>

<h4 id='s5441'>5.4.4.1 project list</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-o</td><td>--owned</td><td>N/A</td><td>Include owned projects</td></tr>
<tr><td>-a</td><td>--admin</td><td>N/A</td><td>Include administered projects</td></tr>
<tr><td>-m</td><td>--member</td><td>N/A</td><td>Include membership projects</td></tr>
<tr><td>-O</td><td>--offset</td><td>integer</td><td>Start list at offset</td></tr>
<tr><td>-C</td><td>--count</td><td>integer</td><td>Limit list to count results'</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List projects according to membership status. [Can be used in conjunction with the <em>more</em> command]
</p>

<h4 id='s5442'>5.4.4.2 project view</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>ID of the project to be viewed</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
View metadata information about the project specified by ID.
</p>

<h4 id='s5443'>5.4.4.3 project select</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>(Optional) ID of the project to be operate as. Omit to deselect current project. </td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
(Interactive mode only) Select project for use. This will append the project ID to any aliases you use in subsequent commands -- and automatically enters the “--project” option as the selected projected. This allows the commands such as <em>ls</em>, <em>data view</em>, <em>etc</em> to be used on records belonging to, or within the context of, the selected project. The ID argument may be a project ID, or an index value from a project listing. If ID is omitted, current project is deselected.
</p>

<h3 id='s5450'>5.4.5 User Commands</h3>

<h4 id='s5451'>5.4.5.1 user all</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-O</td><td>--offset</td><td>integer</td><td>Start list at offset</td></tr>
<tr><td>-C</td><td>--count</td><td>integer</td><td>Limit list to count results'</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List all DataFed users. [Can be used in conjunction with the <em>more</em> command]
</p>

<h4 id='s5452'>5.4.5.2 user collab</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-O</td><td>--offset</td><td>integer</td><td>Start list at offset</td></tr>
<tr><td>-C</td><td>--count</td><td>integer</td><td>Limit list to count results'</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List all DataFed users associated with common projects. [Can be used in conjunction with the <em>more</em> command]
</p>

<h4 id='s5454'>5.4.5.4 user view</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>UID</td><td>ID of the DataFed user to be viewed</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
View information for the user specified.
</p>

<h3 id='s5460'>5.4.6 Xfr (Transfer) Commands</h3>

<h4 id='s5461'>5.4.6.1 xfr list</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-s</td><td>--since</td><td>text</td><td>List from the specified time in seconds (or use suffixes: h = hours, d = days, w = weeks)</td></tr>
<tr><td>-f</td><td>--from</td><td>text</td><td>List from the specified date/time, in format M/D/YYYY,HH:MM</td></tr>
<tr><td>-t</td><td>--to</td><td>text</td><td>List up to the specified date/time, in format M/D/YYYY,HH:MM</td></tr>
<tr><td>-st</td><td>--status</td><td>0,1,2,3,4,init,initiated,active,inactive,succeeded,failed</td><td>List transfer matching the specified status</td></tr>
<tr><td>-l</td><td>--limit</td><td>integer</td><td>Limit to ‘n’ most recent transfers</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List recent Globus transfers.
</p>

<h4 id='s5462'>5.4.6.2 xfr status</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>ID of transfer to be viewed. If omitted, the most recent transfer will be shown</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Get status of Globus transfer ID, or most recent transfer if ID omitted.
</p>

<h3 id='s5470'>5.4.7 Shared Commands</h3>

<h4 id='s5471'>5.4.7.1 shared user</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>
<p>
List users with shared data.
</p>

<h4 id='s5472'>5.4.7.2 shared project</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List projects with shared data.
</p>

<h4 id='s5473'>5.4.7.3 shared ls</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>ID</td><td>ID of the user or project whose shared data is to be listed</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List data records and collections shared with/by the user or project specified.
</p>

<h3 id='s5480'>5.4.8 Ep (Endpoint) Commands</h3>

<h4 id='s5481'>5.4.8.1 ep list</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List recently used endpoints.
</p>

<h4 id='s5482'>5.4.8.2 ep set</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>Endpoint</td><td>Endpoint to set for the current session. Omit to use a newly configured default endpoint.
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
(Interactive mode only) Set endpoint for the current session. If no endpoint is given, the configured default endpoint will be set as the current endpoint.
</p>

<h4 id='s5483'>5.4.8.3 ep get</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
(Interactive mode only) Get Globus endpoint for the current session. At the start of the session, this will automatically be set as the previously configured default endpoint (if available).
</p>

<h4 id='s5484'>5.4.8.4 ep default set</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td></td><td></td><td>Endpoint</td><td>Endpoint to set as the default endpoint.</td></tr>
<tr><td>-c</td><td>--current</td><td>N/A</td><td>Set the current session endpoint as the default endpoint.</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Set the default Globus endpoint (stored in the client configuration file, if available). The default endpoint will be set from the 'endpoint' argument, or, if the --current options is provided, from the currently active endpoint.
</p>

<h4 id='s5485'>5.4.8.5 ep default get</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Get the default Globus endpoint (if previously set/configured).
</p>

<h3 id='s5490'>5.4.9 Query Commands</h3>

<h4 id='s5491'>5.4.9.1 query list</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><th>Short</th><th>Long</th></tr>
<tr><td>-O</td><td>--offset</td><td>integer</td><td>Start list at offset</td></tr>
<tr><td>-C</td><td>--count</td><td>integer</td><td>Limit list to count results'</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
List saved queries. Will return an indexed list, and can be used in conjunction with the <em>more</em> command (interactive mode).

<h4 id='s5492'>5.4.9.2 query execute</h4>

<table class='border-table session-commands'>
<tr><th colspan="2">Option</th><th rowspan="2">Argument</th>><th rowspan="2">Description</th></tr>
<tr><td></td><td></td><td>ID</td><ID of the saved query to be executed</td></tr>
<tr><td>-v</td><td>--verbosity</td><td>0, 1, or 2</td><td>Verbosity of text reply</td></tr>
<tr><td>-J</td><td>--json</td><td>N/A</td><td>Receive output in JSON format</td></tr>
<tr><td>-T</td><td>--text</td><td>N/A</td><td>Receive output in human-friendly text format</td></tr>
<tr><td>-?</td><td>--help</td><td>N/A</td><td>Show the help documentation for this command and exit</td></tr>
</table>

<p>
Execute a stored query by ID, which can be an ID, alias, or index number. This command will return an indexed list of matches, that can be used for subsequent commands when in interactive mode.
</p>




<h2 id='s55'>5.5 Client API</h2>

<p>The DataFed Python CLI package includes a client library module, "ClientLib.py", used by the CLI to communicate with central DataFed services. This module is available for integration into custom, user-created Python applications. The ClientLib module provides basic connectivity and authentication functionality, as well as access to the underlying message-based application programming interface (MAPI) used by DataFed services. The DataFed MAPI (requests, replies, and associated data structures) is defined by a set of included Google Protocol Buffer files (.proto extension). At a very basic level, an application would created, initialize, and send a request message to the DataFed server using functions in the ClientLib module. Subsequent reply messages are received (synchronously or asynchronously) and decoded for processing by the application.</p>
<p>A similar C++ client library is also available in the DataFed code repository, at https://github.com/ORNL/DataFed. Please refer to the DataFed MAPI documentation for further information regarding both the Python and C++ MAPIs. All documentation is located in the "/docs" folder of the DataFed code repository.</p>

            </div>
        </div>
    </div>
</body>
</html>
