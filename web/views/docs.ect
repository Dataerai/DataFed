<!DOCTYPE html>
<html>
    <head>
        <% include 'head.ect' %>
        <title>SDMS Help</title>
    </head>

<body class='' style='height:100%'>
    <div class="col-flex" style="height:100%;width:100%">
        <div class="ui-widget-header" style="flex:none;padding:.25em .5em">
            <div style="font-size:2em;">Scientific Data Management System - Help</div>
        </div>

        <div class='row-flex' style="flex:auto;min-height:0px">
            <div class="ui-widget-content content" style="flex:none;overflow:auto;padding:.25em">
                <h2>Contents</h2>
                <a href='#s1'>1. Introduction</a><br>
                &nbsp&nbsp<a href='#s11'>1.1 Interfaces</a><br>
                <a href='#s2'>2. System Overview</a><br>
                &nbsp&nbsp<a href='#s21'>2.1 Identifiers and Aliases</a><br>
                &nbsp&nbsp<a href='#s22'>2.2 Collective Ownership</a><br>
                &nbsp&nbsp<a href='#s23'>2.3 Metadata</a><br>
                &nbsp&nbsp<a href='#s24'>2.4 Collection Hierarchies</a><br>
                &nbsp&nbsp<a href='#s25'>2.5 Access Control</a><br>
                &nbsp&nbsp<a href='#s26'>2.6 Storage Allocations</a><br>
                <a href='#s3'>3. Registration</a><br>
                <a href='#s4'>4. Web Portal UI</a><br>
                &nbsp&nbsp<a href='#s41'>4.1 Data Browser</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s411'>4.1.1 Drag and Drop</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s412'>4.1.2 My Data</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s413'>4.1.3 My Projects</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s414'>4.1.4 Managed Projects</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s415'>4.1.5 Member Projects</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s416'>4.1.6 Shared Data</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s417'>4.1.7 Search Results</a><br>
                &nbsp&nbsp<a href='#s42'>4.2 Selection Information</a><br>
                &nbsp&nbsp<a href='#s43'>4.3 Action Buttons</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s431'>4.3.1 New</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s432'>4.3.2 Edit</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s433'>4.3.3 Copy</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s434'>4.3.4 Delete</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s435'>4.3.5 Share</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s436'>4.3.6 Get</a><br>
                &nbsp&nbsp&nbsp&nbsp<a href='#s437'>4.3.7 Put</a><br>
                &nbsp&nbsp<a href='#s44'>4.4 Search</a><br>
                &nbsp&nbsp<a href='#s45'>4.5 Transfers</a><br>
                &nbsp&nbsp<a href='#s46'>4.6 Settings</a><br>
                &nbsp&nbsp<a href='#s47'>4.6 Header and Footer</a><br>
            </div>
            <div class='ui-widget-content' style='flex:auto;height:auto;overflow:auto;padding: 0em 2em 0em 2em'>

<h2 id='s1'>1. Introduction</h2>

<p>The SDMS is a federated data <i>collaboration</i> and <i>management</i> system for science. The SDMS provides many features that ease the <i>data management burden</i> associated with general scientific research; however, the primary goal of the SDMS is to <i>improve scientific data quality</i> by enabling precise full-life-cycle control over data artifacts, with the ability to uniformly share and access data across geographically distributed facilities. The combined capabilities of the SDMS directly support the concept of <i>"repeatable science"</i> by unambiguously identifying data, capturing context and metadata, and by providing the means to access and utilize data globally.</p>

<p>The SDMS can be thought of as a "Tier 2+" distributed data storage system - meaning it is intended for creating and working with data that is of medium- to long-term significance to a geographically distributed audience. Unlike a Tier 1 storage system (i.e. a local file system), the SDMS compromises raw access performance in favor of data quality and sustainability. While the SDMS shares many features with Tier 3 storage systems (i.e. a data archives), the SDMS allows data and metadata to be updated and specifically includes features for disseminating any changes to downstream subscribers. The SDMS also provides additional collaboration features to enable precise "in-band" communication regarding data and collections of data.</p>

<p>The SDMS utilizes <a href="https://www.globus.org" target="_blank">Globus Online</a> for efficient and secure data transfers, as well as for user authentication. Globus Online can be thought of as a "data network" where data transfers take place between Globus "endpoints" - which are Globus services that enable access to underlying file systems hosted by member organizations. The SDMS adds a data management layer on top of Globus that permits data to be located and accessed without needing to know where the data is physically stored within the Globus network. Because the SDMS relies heavily on Globus, it is recommended that SDMS users familiarize themselves with how Globus works from the documentation <a href="https://www.globus.org/what-we-do" _target="_blank">here</a>.</p>

<h3 id='s11'>1.1 Interfaces</h3>

<p>There are two ways to access the SDMS: 1) the SDMS Web Portal, and 2) the SDMS command-line interface (CLI). This on-line documentation primarily covers the SDMS Web Portal; however, the SDMS CLI is critical for accessing and managing data from within computational and analytics environments. The CLI was specifically created to ease the data management burden of computational scientists within HPC facilities with complex security environments. The SDMS CLI fills the gap left in HPC systems by the deprecation of the Globus Toolkit.</p>

<p>The SDMS Web Portal provides full access to the SDMS through a graphical user interface. Whereas the SDMS CLI is intended primarily for accessing and updating data, the SDMS Web Portal is intended to facilitate tasks such as creating and organizing collections of data, sharing data with other users, managing projects, data browsing, and performing metadata queries.</p>

<h2 id='s2'>2 System Overview</h2>
<p>The SDMS aggregates and abstracts the federation of distributed data, storage systems, facilities, users, groups, and projects into a single logical unit - with a common nomenclature and uniform access patterns. Some of the components of the SDMS represent real physical systems; whereas others are purely abstract. These components are defined as follows:</p>
<ul>
    <li><b>Data Record</b> - A single unit of data with associated unique identity, attributes, metadata, and raw data.</li>
    <li><b>Collection</b> - An organizational unit with a unique identity and attributes that aggregates data records and/or subordinate collections.</li>
    <li><b>Root Collection</b> - A special collection associated with all users and projects that serves as a default parent container.</li>
    <li><b>User</b> - A person that is identified by a unique Globus account, with optionally linked facility accounts.</li>
    <li><b>Group</b> - A set of users with a unique identity and attributes used for project membership and access control purposes.</li>
    <li><b>Project</b> - An abstract unit with a unique identity and attributes composed of one or more member users and providing collective ownership of data.</li>
    <li><b>Access Control</b> - A set of inheritable permissions associated with a data record or collection that applies to specific users and/or groups, or, optionally, to users that are not explicitly specified.</li>
    <li><b>Facility</b> - A physical location that houses one or more data storage systems or compute resources that is federated into the SDMS network.</li>
    <li><b>Data Repository</b> - A logical unit with associated unique identity and attributes that represents a federated storage system located at a given facility.</li>
    <li><b>Storage Allocation</b> - A logical relationship between a user or project and a data repository specifying an allowed storage capacity.</li>
</ul>
<p>A key concept of the SDMS is the presentation of data in an location-agnostic manner. From a logical viewpoint, users do not need to know where data is physically stored within the SDMS - data can be accessed from any supported facility, or the web portal, by using assigned data record identifiers or user-defined aliases. From a performance standpoint, the physical storage location of data likely matters depending on where the data is being accessed from. For this reason, the SDMS will support data repository caching to optimize frequently accessed data. In addition, users with allocations on multiple data repositories may opt to migrate data between repositories based on usage locality.</p>

<h3 id='s21'>2.1 Identifiers and Aliases</h3>

<p>All records in the SDMS (data, collections, user, projects, etc.) are automatically assigned a system-unique identifier consisting of a prefix and an alphanumeric value. For data records and collections these identifiers are numeric, so users may choose to assign a more human-friendly "alias" that can be used in place of identifiers. Aliases are alphanumeric (with certain restrictions) and case sensitive, and, to avoid collisions, are automatically prefixed with the type ("u" or "p") and value portion of the identifier of the owning user or project, delimited with colons. When aliases are used by the owner, the alias prefix may be omitted.</p>

<p>For example, if a user with an ID of "u/jsmith" creates an alias "mydata", then the full alias would be "u:jsmith:mydata". User "jsmith" can simply use "mydata", but other users would need to use the full alias instead. Note that in the SDMS web portal, aliases are typically shown without the prefix. Also the SDMS CLI provides a "select" command to automatically prefix subsequent commands with a specific user or project ID.</p>

<h3 id='s22'>2.2 Collective Ownership</h3>

<p>When an individual user creates a data record or collection, that user becomes the owner and is granted full control of the newly create data record or collection. Collective ownership is achieved through the use of <i>projects</i>. An SDMS project is a distinct organizational entity that permits multiple associated users to create and manage data records and collections as a team - without requiring member users to configure individual access control rules. When a project member creates a data record or collection, the project becomes the owner rather than the user.</p>

<p>Projects support specific roles for associated users:</p>
<ul>
    <li><b>Administrators</b> - These users have complete control over the project and contained data and collections. The user that initially creates a project becomes an administrator by default, but a project can have multiple administrators assigned.</li>
    <li><b>Managers</b> - These users have the ability to add and remove project members (but not administrators or other managers), and can also configure access control rules on the projects root collection. A project can have multiple managers assigned by administrators.</li>
    <li><b>Members</b> - These users may create and update data records and collections based on the access control rules set by managers or administrators.</li>
</ul>

<h3 id='s23'>2.3 Metadata</h3>

<p>Data records support user-defined metadata. "Metadata" is distinct from built-on record attributes such as title and description, and is represented using Javascript Object Notation (JSON). JSON was selected because it is human-readable and can represent arbitrary structured documents. When creating or updating a data record, metadata may be directly specified in textual form, or, with the SDMS CLI, a JSON file may be used as the metadata source. When updating, the user has the option to either replace existing metadata or to merge new metadata with existing metadata. In the case of merging, any keys that are present both the new and existing metadata will be overwritten by the new values - other existing keys are left unchanged and new keys are inserted.</p>

<p><i>Note that when providing metadata, it must fully comply with the JSON specification, located <a href="https://tools.ietf.org/html/rfc8259" target="_blank">here</a>.</i></p>

<h3 id='s24'>2.4 Collection Hierarchies</h3>

<p>When initially encountered, collection hierarchies within the SDMS may resemble a file system with directories containing files and sub-directories. While similar structurally, there are profound functional differences between SDMS collection hierarchies and typical file systems:</p>
<ul>
    <li>In a file system, a file cannot be accessed without <i>traversing</i> the directory structure in which it is contained (the file's path). Essentially the path of the file determines who can access the file through coarse-grained permission set on the individual path directories and the file itself. In the SDMS, a data record can be addressed directly by its unique identifier or alias, and instead of "traversing" the containing collection hierarchy for permissions, permissions are either "inherited" from the hierarchy, set directly on the data record, or both.</li>
    <li>In a file system, a file typically resides at a single path. Some file systems support linking, which allows file contents to be shared by multiple file instances, but the linked files may have different filenames. The SDMS allows data records (but not collections) to be contained in multiple collection hierarchies. This is achieved by a mechanism similar to linking in a file system; except that there is only one instance of the data record.</li>
    <li>In a file system, there is no way to consistently and unambiguously identify a specific file instance over time. Because a file's identity is defined only by it path, if the file is moved, it essentially has a new identity. On the other hand, a file could be overwritten by a new file with the same path but entirely different contents - in this case the new file has the identity of a previous file, but may be entirely unrelated. The SDMS associates a unique, immutable, and non-recyclable identifier with data records and collections. No matter which collections it is placed in, or how many times it is update, or where the associated raw data is physically stored, a record's identity is always known.</li>
</ul>

<h3 id='s25'>2.5 Access Control</h3>

<p>The SDMS implements fine-grained access control through a set of permissions that can be applied to both data records and collections. Permissions can be configured to apply to anyone, specific users, groups of users, or a combination of any of these. Data records and collections share the same set of permissions; however, collections have an additional set of permissions specifically for permission inheritance. The individual permissions are defined as follows:</p>
<ul>
    <li><b>VIEW</b> - Allows users to list a data record or collection and view basic information.</li>
    <li><b>READ_META</b> - Allows users to read any metadata associated with a data record.</li>
    <li><b>READ_DATA</b> - Allows users to read raw data associated with a data record, or to list the contents of a collection.</li>
    <li><b>WRITE_META</b> - Allows users to create or update metadata associated with a data record.</li>
    <li><b>WRITE_DATA</b> - Allows users to create or update raw data associated with a data record, or to add or remove items within a collection.</li>
    <li><b>ADMIN</b> - Allows users to edit basic information, set access controls, move, and/or delete a data record or collection.</li>
</ul>
<p>The above permissions may be combined and applied to a data record or collection using one of the following permission scopes:</p>
<ul>
    <li><b>Default</b> - Permissions apply to everyone.</li>
    <li><b>User</b> - Permission apply to a specified user.</li>
    <li><b>Group</b> - Permission apply to a specific group.</li>
</ul>
<p>While there is only one "default" set of permissions on a data record or collection, multiple user- and group- scoped permission may be applied. Permissions for a given user are evaluated by combining all permission set for all scopes that apply - including permissions that may be inherited from parent collection hierarchies. Because permissions are inherited and additive, the absence of a permission on a given data record or collection is not equivalent to denying that permission.</p>

<p>Access controls are typically applied to parent collections of a collection hierarchy where contained data and sub-collections inherit the permissions defined by the top-level parent. Collections have both "local" and "inherited" permissions; where local permissions control access to the collection record itself, and "inherited" permissions are the permissions passed down to all contained data records and sub-collections. Note that because data records can be placed into multiple collections, the inherited permissions of <i>all</i> associated parent collections are evaluated for <i>all</i> users accessing a given data record.</p>

<h3 id='s26'>2.6 Storage Allocations</h3>

<p>Having access to the SDMS does not, in itself, grant users the ability to create or manage data within the SDMS. This is due to the fact that the SDMS does not provide any data storage of its own, but instead relies on <i>federated</i> storage provided by SDMS member organizations. Federated storage is implemented through a network of geographically distributed "data repositories" that are owned and maintained by specific SDMS member organizations, yet potentially accessible by all SDMS users. It is the SDMS member organizations that individually determine how storage allocations are assigned to specific users.</p>

<p>Typically, SDMS users with an account at one or more SDMS member organizations will be automatically granted storage allocations on data repositories managed by those organizations. For unaffiliated users, storage allocations may be explicitly requested from an SDMS member organizations. SDMS member organizations are free to define and enact their own data storage policies; therefore, users wishing to acquire storage a specific allocation must contact the associated organization for information on how to proceed. Even though unaffiliated users with no storage allocation cannot use the SDMS to create and manage their own data, the SDMS is still allows these users to locate, access, and monitor data owned by other SDMS users or projects.</p>

<p>It is typical for SDMS users to have multiple storage allocations on different data repositories. In this case, a default storage allocation may be specified, or a specific storage allocation selected when creating new SDMS data records. Data can be accessed in a consistent manner no matter which data repository it is stored on; however, the physical location of a data repository in relation to the point of use of data can impact initial access time.</p>

<h2 id='s3'>3. Registration</h2>

<p>User registration is required in order to access the SDMS. Registration is free and secure, but requires users to have, or obtain, a free <a href="https://www.globus.org" target="_blank">Globus Online</a> account. Many universities and research facilities, worldwide, are "member organizations" of Globus and typically provide Globus accounts for their students, staff, and/or users. If your home institute does not provide Globus accounts, you can obtain a personal Globus account through Globus ID, located <a href="https://www.globusid.org" target="_blank">here</a>.</p>

<p>SDMS registration utilizes a standard Globus authentication and authorization process. When you click the "register" button on the SDMS welcome page, you will be redirected to Globus for authentication (log-in) based on your Globus account. Globus will then ask you to authorize the SDMS to access your Globus identity and to allow the SDMS to transfer data on your behalf. Once this process is complete, you will be redirected to an SDMS post-registration page where you will create an SDMS password. This password is only used when manually authenticating from the SDMS command-line interface, and it can be updated from the SDMS Web Portal at any time.</p>

<p>Note that the SDMS will only initiate data transfers when you (or a process running as you) explicity request it to. Further, SDMS data transfers are constrained to be between SDMS data storage repositories and Globus endpoints that you have pre-authorized (or "activated") for access. Globus end-point activation is transient and access will expire within a period determined by the host institute.</p>

<h2 id='s4'>4. Web Portal User Interface</h2>

<p>The focal-point of the <a href="https://sdms.ornl.gov" target="sdms_target">SDMS web portal</a> is the "Data Browser" that allows users to navigate through data, collections, and projects that they own or have access to. Depending on a users role and/or access permission, a variety of actions may be performed on the data, collections, and projects presented in the Data Browser (i.e. editing, sharing, etc.). Additional features include searching with metadata-based queries, viewing recent data transfers, and managing settings. Sections 4.1 through 4.6 describe the location and function(s) of the major elements of the web portal. Note that the web portal is implemented as a <i>single-page</i> application; therefore, web browser navigation functions (i.e. forward/back) should not be used.</p>

<p><i>Note that the SDMS web portal uses browser cookies to store user identity and context information. Once these cookies are set, the SDMS web portal tracks a user's Globus Online authentication status and, while logged-in to Globus, users will be granted access to the SDMS portal without requiring an additional log-in. If a user wishes to disable web portal access, they must explicitly log-out of Globus using the "log-out" link <h href="https://www.globus.org/" target="_blank">here</h>.</i></p>

<h3 id='s41'>4.1 Data Browser</h3>

<p>The "Data Browser", located on the left hand side of the interface, contains a navigable tree structure organized into categories. When an item in the browser tree is selected (by either clicking on them, or using keyboard navigation), information about the item is displayed in the "Selection Information" panel located to the right of the browser panel. In addition, the "action buttons" located below the data browser may be enabled or disabled depending on what actions are valid for the selected item.</p>

    <h4 id='s411'>4.1.1 Drag and Drop</h4>

    <p>Data records and collections in the browser tree may be organized by dragging items from one location to another. For example, data records in one collection may be dragged into another collection, or an entire collection may be dragged into another collection - whereupon the receiving collection becomes the parent of the moved data record or collection. By default, data records are linked into new locations when dragged, rather than moved. To move a data record, the "Shift" key must be held while dragging the data record. (Collections cannot be linked and are always moved.)</p>

    <p>A data record or collection can be "unlinked" from a parent collection by holding thr "Ctrl" key and clicking the data record. This does not delete the unlinked data record or collection, it simply removes it from the parent collection. In the case of collections, or data records that are not linked to other collections, unlinking will re-link the item to the root collection. This is because all data records and collections must have a parent collection (except for root collection itself).
    </p>

    <h4 id='s412'>4.1.2 My Data</h4>

    <p>This category shows data records and collections owned by the current user. All actions are permitted on these data records and collections.</p>

    <h4 id='s413'>4.1.3 My Projects</h4>

    <p>This category shows projects that are owned by the current user. All actions are permitted on these projects.</p>

    <h4 id='s414'>4.1.4 Managed Projects</h4>

    <p>This category shows projects that are managed by the current user. Project managers are allowed to add/remove project members and set permissions on the root collection.</p>

    <h4 id='s415'>4.1.5 Member Projects</h4>

    <p>This category shows projects that the current user is a member of. Project members are allowed to create and access data and collections per the permissions set by the project owner and/or manager.</p>

    <h4 id='s416'>4.1.6 Shared Data</h4>

    <p>This category of the shows data and collections that have been explicitly shared with the current user. The current user is allowed to view and/or perform actions on the listed data and collections per the permissions set by the associated user or project sharing the data.</p>

    <h4 id='s417'>4.1.7 Search Results</h4>

    <p>This category shows any matching data records returned from a query initiated under the "Search" tab. Actions are permitted based on permissions set by the owners of matched data records. Note: collections will never be returned as matches.</p>

<h3 id='s42'>4.2 Selection Information</h3>

<p>When an item in the Data Browser tree is selected, if any information about that item is available (and the current user has sufficient permissions), it is displayed in the "Selection Information" panel located on the right-hand side of the web portal. The information will include the identity of the item and, optionally, a title (or name), a description, item details, and metadata. The "Description", "Details", and "Metadata" tabs may be collapsed and expanded by clicking on them.</p>

<h3 id='s43'>4.3 Action Buttons</h3>
    <h4 id='s431'>4.3.1 New</h4>
    <p>Allows user to create new data records, collections, and projects. When selecting "data" or "collection" option, the current selection in the data browser will determine the default parent collection shown in the associated dialog.</p>
    <h4 id='s432'>4.3.2 Edit</h4>
    <p>Allows users with ADMIN and/or WRITE_META permission to edit a data record or collection, or a project administrator to edit a project.</p>
    <h4 id='s433'>4.3.3 Copy</h4>
    <p>Allows users with VIEW, READ_META, and READ_DATA permission to copy a selected data record as a new data record.</p>
    <h4 id='s434'>4.3.4 Delete</h4>
    <p>Allows users with ADMIN permission to delete a data record or collection, or a project administrator to delete a project.</p>
    <h4 id='s435'>4.3.5 Share</h4>
    <p>Allows users with ADMIN permission to configure access controls for a data record or collection.</p>
    <h4 id='s436'>4.3.6 Get</h4>
    <p>Allows users with READ_DATA permission to "get" (download) the raw data of a data record.</p>
    <h4 id='s437'>4.3.7 Put</h4>
    <p>Allows users with WRITE_DATA permission to "put" (upload) the raw data of a data record.</p>

<h3 id='s44'>4.4 Search</h3>
    <p>The "Search" tab below the action buttons allows users to query the SDMS for data matching a specified metadata expression within a specified scope.</p>
    <p style="color:red">Note: the query language is currently a subset of ArangoDB AQL; however, this will be changing in the near future.</p>

<h3 id='s45'>4.5 Transfers</h3>
    <p>The "Transfers" tab below the action buttons shows recent data transfers (get/put) initiated either from the SDMS Web Portal or via the CLI.</p>
<h3 id='s46'>4.6 Settings</h3>
    <p>The "Settings" tab below the action buttons allows the current user to update a number of SDMS configuration parameters, as follows:</p>
    <ul>
        <li><b>CLI Password</b> - This is the password that is required when manually authenticating through the SDMS CLI. This password is only required until the CLI "setup" command is used to generate and install local credentials.</li>
        <li><b>Revoke All Credentials</b> - This button will reset ALL installed CLI credentials. The CLI "setup" command must be used to generate and install new credentials per environment.</li>
        <li><b>User Interface Theme</b> - Allows the UI theme to set to "light" (default) or "dark".</li>
        <li><b>E-mail Address</b> - The E-mail address that will be used to contact the current user.</li>
    </ul>
    <p>These settings are saved automatically whenever they are changed.</p>
<h3 id='s47'>4.7 Header and Footer</h3>
    <p>The "header" is the section of the user interface at the very top of the page amd contains the title, a "help" button (which opens this document), and a "log-out" button. The "footer" is located at the very bottom of the page amd contains the status bar that displays the current user name and informational messages.</p>
<br>
<br>
<br>

            </div>
        </div>
    </div>
</body>
</html>
